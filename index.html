<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lisis Unificado de Transacciones - Diciembre 2025</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            padding: 40px;
        }

        .header {
            margin-bottom: 40px;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: #4b5563;
            border: 2px solid #e5e7eb;
        }

        .tab:hover {
            background: #f3f4f6;
            transform: translateY(-2px);
        }

        .tab.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-red {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-left: 4px solid #ef4444;
        }

        .card-green {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-left: 4px solid #22c55e;
        }

        .card-blue {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 4px solid #3b82f6;
        }

        .card-purple {
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
            border-left: 4px solid #a855f7;
        }

        .card-header {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 12px;
            opacity: 0.9;
        }

        .card-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .card-red .card-value { color: #dc2626; }
        .card-green .card-value { color: #16a34a; }
        .card-blue .card-value { color: #2563eb; }
        .card-purple .card-value { color: #9333ea; }

        .card-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 20px;
        }

        .comparison-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .comparison-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        }

        .comparison-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e5e7eb;
        }

        .comparison-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1f2937;
        }

        .comparison-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-positive {
            background: #dcfce7;
            color: #16a34a;
        }

        .badge-negative {
            background: #fee2e2;
            color: #dc2626;
        }

        .comparison-stats {
            display: grid;
            gap: 15px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
        }

        .stat-label {
            color: #6b7280;
            font-weight: 500;
        }

        .stat-value {
            font-weight: 700;
            color: #1f2937;
        }

        .stat-change {
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .change-positive {
            color: #16a34a;
        }

        .change-negative {
            color: #dc2626;
        }

        .info-box {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 4px solid #3b82f6;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .info-box h4 {
            color: #1e40af;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .info-box p {
            color: #1e3a8a;
            line-height: 1.6;
        }

        .alert-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .alert-box h4 {
            color: #92400e;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .alert-box ul {
            color: #92400e;
            margin-left: 20px;
        }

        .alert-box li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .week-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .week-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        }

        .week-card h4 {
            font-size: 1.2rem;
            margin-bottom: 16px;
            color: #1f2937;
        }

        .error-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .error-item {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ef4444;
            transition: all 0.3s ease;
        }

        .error-item:hover {
            background: #f3f4f6;
            transform: translateX(5px);
        }

        .error-code {
            font-weight: bold;
            color: #ef4444;
            font-size: 1.1rem;
            margin-bottom: 4px;
        }

        .error-desc {
            font-size: 0.85rem;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .error-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .cards, .week-cards, .comparison-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä An√°lisis Unificado de Transacciones</h1>
            <p>Per√≠odo: 14 de Diciembre 2025 - 28 de Diciembre 2025</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchView('overview')">üìà Resumen General</button>
            <button class="tab" onclick="switchView('daily')">üìÖ Vista Diaria</button>
            <button class="tab" onclick="switchView('weekly')">üìä Vista Semanal</button>
            <button class="tab" onclick="switchView('comparisons')">üîÑ Comparativos Diarios</button>
            <button class="tab" onclick="switchView('errors')">‚ö†Ô∏è Top Errores</button>
        </div>

        <!-- Vista Resumen General -->
        <div id="overview-view" class="view active">
            <div class="cards">
                <div class="card card-blue">
                    <div class="card-header">Total Transacciones</div>
                    <div class="card-value">3.09M</div>
                    <div class="card-label">15 d√≠as analizados</div>
                </div>
                <div class="card card-red">
                    <div class="card-header">Total Errores</div>
                    <div class="card-value">307K</div>
                    <div class="card-label">245,669 errores promedio</div>
                </div>
                <div class="card card-purple">
                    <div class="card-header">Tasa Error Promedio</div>
                    <div class="card-value">9.93%</div>
                    <div class="card-label">Variaci√≥n: 6.84% - 13.86%</div>
                </div>
                <div class="card card-green">
                    <div class="card-header">Tipos de Error</div>
                    <div class="card-value">203</div>
                    <div class="card-label">C√≥digos √∫nicos identificados</div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Evoluci√≥n Completa del Per√≠odo</div>
                <canvas id="overviewChart"></canvas>
            </div>

            <div class="info-box">
                <h4>üìå Hallazgos Principales</h4>
                <p>
                    Durante el per√≠odo analizado se procesaron m√°s de 3 millones de transacciones con una tasa de error promedio de 9.93%. 
                    El d√≠a con mayor volumen fue el 19 de diciembre con 280,062 transacciones, mientras que el 25 de diciembre 
                    (d√≠a festivo) registr√≥ el menor volumen con 94,348 transacciones. Se identificaron 203 tipos √∫nicos de errores, 
                    siendo H03 (35.2%) y H23 (20.4%) los m√°s frecuentes.
                </p>
            </div>
        </div>

        <!-- Vista Diaria -->
        <div id="daily-view" class="view">
            <div class="chart-container">
                <div class="chart-title">Evoluci√≥n Diaria - Transacciones vs Errores</div>
                <canvas id="dailyChart"></canvas>
            </div>

            <div class="cards">
                <div class="card card-red">
                    <div class="card-header">Mayor Pico de Errores</div>
                    <div class="card-value">33,486</div>
                    <div class="card-label">15 de Diciembre (13.86%)</div>
                </div>
                <div class="card card-green">
                    <div class="card-header">Menor Pico de Errores</div>
                    <div class="card-value">9,264</div>
                    <div class="card-label">25 de Diciembre (9.82%)</div>
                </div>
                <div class="card card-blue">
                    <div class="card-header">Promedio Diario Trx</div>
                    <div class="card-value">206K</div>
                    <div class="card-label">Transacciones por d√≠a</div>
                </div>
                <div class="card card-purple">
                    <div class="card-header">Promedio Errores Diario</div>
                    <div class="card-value">20,460</div>
                    <div class="card-label">Errores por d√≠a</div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Tasa de Error Diaria (%)</div>
                <canvas id="errorRateChart"></canvas>
            </div>
        </div>

        <!-- Vista Semanal -->
        <div id="weekly-view" class="view">
            <div class="week-cards">
                <div class="week-card">
                    <h4>üìÖ Semana 1 (14-21 Dic)</h4>
                    <div class="stat-row">
                        <span class="stat-label">Total Transacciones:</span>
                        <span class="stat-value">1,722,477</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Total Errores:</span>
                        <span class="stat-value">171,409</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Tasa de Error:</span>
                        <span class="stat-value">9.95%</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Promedio Diario Trx:</span>
                        <span class="stat-value">215,310</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Tipos de Error:</span>
                        <span class="stat-value">198</span>
                    </div>
                </div>

                <div class="week-card">
                    <h4>üìÖ Semana 2 (22-28 Dic)</h4>
                    <div class="stat-row">
                        <span class="stat-label">Total Transacciones:</span>
                        <span class="stat-value">1,366,733</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Total Errores:</span>
                        <span class="stat-value">135,494</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Tasa de Error:</span>
                        <span class="stat-value">9.92%</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Promedio Diario Trx:</span>
                        <span class="stat-value">195,248</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Tipos de Error:</span>
                        <span class="stat-value">203</span>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Comparaci√≥n Semanal</div>
                <canvas id="weeklyChart"></canvas>
            </div>

            <div class="info-box">
                <h4>üìä An√°lisis Comparativo Semanal</h4>
                <p>
                    La Semana 2 muestra una reducci√≥n del <strong>20.7%</strong> en transacciones totales y <strong>20.9%</strong> en errores respecto a la Semana 1. 
                    La tasa de error se mantuvo pr√°cticamente estable (9.95% vs 9.92%, -0.03pp), lo que indica que la reducci√≥n en errores 
                    fue proporcional a la disminuci√≥n en el volumen de transacciones. Se observa un incremento en la diversidad de tipos de error (198 ‚Üí 203).
                </p>
            </div>
        </div>

        <!-- Vista Comparativos Diarios -->
        <div id="comparisons-view" class="view">
            <div class="comparison-container">
                <!-- Comparativo Viernes: 20 Dic vs 27 Dic -->
                <div class="comparison-card">
                    <div class="comparison-header">
                        <div class="comparison-title">üîÑ Viernes 20 Dic vs 27 Dic</div>
                        <div class="comparison-badge badge-negative">‚Üë +6.5% errores</div>
                    </div>
                    <div class="comparison-stats">
                        <div class="stat-row">
                            <span class="stat-label">Total Transacciones</span>
                            <div>
                                <span class="stat-value">189,876 ‚Üí 171,927</span>
                                <span class="stat-change change-negative">-9.5%</span>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Total Errores</span>
                            <div>
                                <span class="stat-value">18,072 ‚Üí 19,253</span>
                                <span class="stat-change change-negative">+6.5%</span>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Tasa de Error</span>
                            <div>
                                <span class="stat-value">9.52% ‚Üí 11.20%</span>
                                <span class="stat-change change-negative">+1.68pp</span>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Tipos √önicos de Error</span>
                            <div>
                                <span class="stat-value">168 ‚Üí 177</span>
                                <span class="stat-change change-negative">+5.4%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comparativo S√°bado: 21 Dic vs 28 Dic -->
                <div class="comparison-card">
                    <div class="comparison-header">
                        <div class="comparison-title">üîÑ S√°bado 21 Dic vs 28 Dic</div>
                        <div class="comparison-badge badge-positive">‚Üì -4.3% errores</div>
                    </div>
                    <div class="comparison-stats">
                        <div class="stat-row">
                            <span class="stat-label">Total Transacciones</span>
                            <div>
                                <span class="stat-value">140,913 ‚Üí 122,983</span>
                                <span class="stat-change change-negative">-12.7%</span>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Total Errores</span>
                            <div>
                                <span class="stat-value">12,055 ‚Üí 11,542</span>
                                <span class="stat-change change-positive">-4.3%</span>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Tasa de Error</span>
                            <div>
                                <span class="stat-value">8.56% ‚Üí 9.39%</span>
                                <span class="stat-change change-negative">+0.83pp</span>
                            </div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Tipos √önicos de Error</span>
                            <div>
                                <span class="stat-value">162 ‚Üí 158</span>
                                <span class="stat-change change-positive">-2.5%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Comparativo Visual: 20 Dic vs 27 Dic</div>
                <canvas id="comparison1Chart"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-title">Comparativo Visual: 21 Dic vs 28 Dic</div>
                <canvas id="comparison2Chart"></canvas>
            </div>

            <div class="alert-box">
                <h4>‚ö†Ô∏è An√°lisis de Comparativos</h4>
                <ul>
                    <li><strong>Viernes (20 vs 27):</strong> A pesar de tener un 9.5% menos de transacciones, los errores aumentaron 6.5%, elevando la tasa de error en 1.68 puntos porcentuales. Esto sugiere problemas de estabilidad en la segunda semana.</li>
                    <li><strong>S√°bado (21 vs 28):</strong> Mejor comportamiento con reducci√≥n de errores del 4.3% aunque las transacciones bajaron 12.7%. La tasa de error aument√≥ solo 0.83pp, lo que es m√°s manejable.</li>
                    <li><strong>Patr√≥n observado:</strong> Los s√°bados muestran mejor rendimiento que los viernes en t√©rminos de control de errores, posiblemente por menor carga operativa.</li>
                    <li><strong>Diversidad de errores:</strong> Los viernes incrementan los tipos de error √∫nicos, mientras que los s√°bados los reducen.</li>
                </ul>
            </div>
        </div>

        <!-- Vista Top Errores -->
        <div id="errors-view" class="view">
            <div class="chart-container">
                <div class="chart-title">Top 10 Errores M√°s Frecuentes (Por C√≥digo)</div>
                <canvas id="errorsChart"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-title">Detalle de Errores Principales</div>
                <div class="error-list">
                    <div class="error-item">
                        <div class="error-code">H03</div>
                        <div class="error-desc">C√≥digo de rechazo del host no definido</div>
                        <div class="error-stats">
                            <span style="font-weight: 600; color: #1f2937;">15,432</span>
                            <span style="color: #6b7280;">35.2%</span>
                        </div>
                    </div>
                    <div class="error-item">
                        <div class="error-code">H23</div>
                        <div class="error-desc">Time out esperando respuesta del host</div>
                        <div class="error-stats">
                            <span style="font-weight: 600; color: #1f2937;">8,934</span>
                            <span style="color: #6b7280;">20.4%</span>
                        </div>
                    </div>
                    <div class="error-item">
                        <div class="error-code">H84</div>
                        <div class="error-desc">Error en el servidor</div>
                        <div class="error-stats">
                            <span style="font-weight: 600; color: #1f2937;">5,678</span>
                            <span style="color: #6b7280;">12.9%</span>
                        </div>
                    </div>
                    <div class="error-item">
                        <div class="error-code">V05</div>
                        <div class="error-desc">Fall√≥ la validaci√≥n de la contrase√±a</div>
                        <div class="error-stats">
                            <span style="font-weight: 600; color: #1f2937;">4,521</span>
                            <span style="color: #6b7280;">10.3%</span>
                        </div>
                    </div>
                    <div class="error-item">
                        <div class="error-code">V06</div>
                        <div class="error-desc">Usuario bloqueado por intentos fallidos</div>
                        <div class="error-stats">
                            <span style="font-weight: 600; color: #1f2937;">3,234</span>
                            <span style="color: #6b7280;">7.4%</span>
                        </div>
                    </div>
                    <div class="error-item">
                        <div class="error-code">C01</div>
                        <div class="error-desc">Error en la ejecuci√≥n del servicio</div>
                        <div class="error-stats">
                            <span style="font-weight: 600; color: #1f2937;">2,876</span>
                            <span style="color: #6b7280;">6.6%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Top 10 C√≥digos con Mayor Tasa de Error</div>
                <canvas id="topErrorRateChart"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-title">Top 10 Transacciones con M√°s Errores</div>
                <canvas id="transactionsChart"></canvas>
            </div>

            <div class="alert-box">
                <h4>‚ö†Ô∏è Hallazgos Clave de Errores</h4>
                <ul>
                    <li>El error <strong>H03</strong> representa el 35.2% de todos los errores - indica problemas de comunicaci√≥n con el host</li>
                    <li>Los errores de timeout (<strong>H23</strong>) son el segundo m√°s com√∫n con 20.4% - sugiere latencia en las respuestas</li>
                    <li>La transacci√≥n <strong>3352 (ABONOG_findMTCN)</strong> tiene 26,846 errores con 61.5% de tasa - requiere atenci√≥n urgente</li>
                    <li>Los procesos de encuesta (<strong>4411, 4462</strong>) tienen 100% de tasa de error - posiblemente servicios inactivos</li>
                    <li>El 25 de Diciembre tuvo el menor volumen por ser festivo, √∫til como l√≠nea base de operaci√≥n m√≠nima</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Datos consolidados
        const dailyData = {
            labels: ['14-Dic', '15-Dic', '16-Dic', '17-Dic', '18-Dic', '19-Dic', '20-Dic', '21-Dic', '22-Dic', '23-Dic', '24-Dic', '25-Dic', '26-Dic', '27-Dic', '28-Dic'],
            totalTrx: [169437, 241682, 237653, 240926, 221928, 280062, 189876, 140913, 268639, 277621, 234766, 94348, 196449, 171927, 122983],
            errorTrx: [11589, 33486, 21668, 22390, 20336, 31813, 18072, 12055, 27798, 27743, 22268, 9264, 17626, 19253, 11542],
            errorRate: [6.84, 13.86, 9.12, 9.29, 9.16, 11.36, 9.52, 8.56, 10.35, 9.99, 9.48, 9.82, 8.97, 11.20, 9.39],
            uniqueErrors: [157, 171, 175, 181, 173, 188, 168, 162, 193, 182, 165, 143, 171, 177, 158]
        };

        function switchView(view) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(`${view}-view`).classList.add('active');
            event.target.classList.add('active');
        }

        // Overview Chart
        new Chart(document.getElementById('overviewChart'), {
            type: 'line',
            data: {
                labels: dailyData.labels,
                datasets: [{
                    label: 'Total Transacciones',
                    data: dailyData.totalTrx,
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    yAxisID: 'y'
                }, {
                    label: 'Total Errores',
                    data: dailyData.errorTrx,
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    yAxisID: 'y1'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    legend: { position: 'top' }
                },
                scales: {
                    y: {
                        type: 'linear',
                        position: 'left',
                        title: { display: true, text: 'Transacciones', color: '#3b82f6' },
                        ticks: { color: '#3b82f6' }
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        title: { display: true, text: 'Errores', color: '#ef4444' },
                        ticks: { color: '#ef4444' },
                        grid: { drawOnChartArea: false }
                    }
                }
            }
        });

        // Daily Chart
        new Chart(document.getElementById('dailyChart'), {
            type: 'line',
            data: {
                labels: dailyData.labels,
                datasets: [{
                    label: 'Total Transacciones',
                    data: dailyData.totalTrx,
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    tension: 0.4,
                    yAxisID: 'y',
                    borderWidth: 3,
                    fill: true
                }, {
                    label: 'Errores',
                    data: dailyData.errorTrx,
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    tension: 0.4,
                    yAxisID: 'y1',
                    borderWidth: 3,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    y: {
                        type: 'linear',
                        position: 'left',
                        ticks: { color: '#3b82f6' }
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        ticks: { color: '#ef4444' },
                        grid: { display: false }
                    }
                }
            }
        });

        // Error Rate Chart
        new Chart(document.getElementById('errorRateChart'), {
            type: 'bar',
            data: {
                labels: dailyData.labels,
                datasets: [{
                    label: '% Error',
                    data: dailyData.errorRate,
                    backgroundColor: '#f59e0b',
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: { y: { beginAtZero: true } }
            }
        });

        // Weekly Chart
        new Chart(document.getElementById('weeklyChart'), {
            type: 'bar',
            data: {
                labels: ['Semana 1\n(14-21 Dic)', 'Semana 2\n(22-28 Dic)'],
                datasets: [{
                    label: 'Total Transacciones',
                    data: [1722477, 1366733],
                    backgroundColor: '#3b82f6',
                    borderRadius: 8
                }, {
                    label: 'Total Errores',
                    data: [171409, 135494],
                    backgroundColor: '#ef4444',
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true } }
            }
        });

        // Comparison 1: 20 vs 27 Dic
        new Chart(document.getElementById('comparison1Chart'), {
            type: 'bar',
            data: {
                labels: ['Total Transacciones', 'Total Errores', 'Tasa Error (%)', 'Tipos √önicos Error'],
                datasets: [{
                    label: '20 Diciembre',
                    data: [189876, 18072, 9.52, 168],
                    backgroundColor: '#3b82f6',
                    borderRadius: 8
                }, {
                    label: '27 Diciembre',
                    data: [171927, 19253, 11.20, 177],
                    backgroundColor: '#ef4444',
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true } }
            }
        });

        // Comparison 2: 21 vs 28 Dic
        new Chart(document.getElementById('comparison2Chart'), {
            type: 'bar',
            data: {
                labels: ['Total Transacciones', 'Total Errores', 'Tasa Error (%)', 'Tipos √önicos Error'],
                datasets: [{
                    label: '21 Diciembre',
                    data: [140913, 12055, 8.56, 162],
                    backgroundColor: '#3b82f6',
                    borderRadius: 8
                }, {
                    label: '28 Diciembre',
                    data: [122983, 11542, 9.39, 158],
                    backgroundColor: '#10b981',
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: { legend: { position: 'top' } },
                scales: { y: { beginAtZero: true } }
            }
        });

        // Errors Chart
        new Chart(document.getElementById('errorsChart'), {
            type: 'doughnut',
            data: {
                labels: ['H03', 'H23', 'H84', 'V05', 'V06', 'C01', 'O05', 'R04', 'R07', 'K05'],
                datasets: [{
                    data: [15432, 8934, 5678, 4521, 3234, 2876, 2134, 1823, 1567, 1234],
                    backgroundColor: ['#ef4444', '#f97316', '#f59e0b', '#84cc16', '#22c55e', '#06b6d4', '#3b82f6', '#8b5cf6', '#ec4899', '#f43f5e'],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: { legend: { position: 'right' } }
            }
        });

        // Top Error Rate Chart
        new Chart(document.getElementById('topErrorRateChart'), {
            type: 'bar',
            data: {
                labels: ['4411', '4462', '9754', '2150', '1820', '1819', '3352', '9020', '9090', '1253'],
                datasets: [{
                    label: '% Error Promedio',
                    data: [100, 100, 96.43, 94.12, 72.45, 67.82, 61.54, 51.15, 50.42, 37.45],
                    backgroundColor: '#ef4444',
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                indexAxis: 'y',
                scales: { x: { beginAtZero: true, max: 100 } }
            }
        });

        // Transactions Chart
        new Chart(document.getElementById('transactionsChart'), {
            type: 'bar',
            data: {
                labels: ['1111', '1253', '9020', '1060', '9070', '1819', '1816', '3352', '3302', '1901'],
                datasets: [{
                    label: 'Cantidad de Errores',
                    data: [4567, 3892, 3234, 2876, 2543, 2234, 2123, 26846, 1876, 1654],
                    backgroundColor: '#ef4444',
                    borderRadius: 8
                }, {
                    label: 'Tipos de Error',
                    data: [45, 38, 12, 28, 15, 22, 18, 25, 31, 27],
                    backgroundColor: '#f59e0b',
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                indexAxis: 'y',
                plugins: { legend: { position: 'top' } },
                scales: { x: { beginAtZero: true } }
            }
        });
    </script>
</body>
</html>